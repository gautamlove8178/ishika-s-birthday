<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Happy New Year â€” Ishika ðŸ’–</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box}
  body{overflow:hidden;font-family:'Segoe UI',sans-serif;background:#000;color:#fff;height:100vh;text-align:center} /* Added text-align:center */
  #slideshow{position:fixed;top:0;left:0;width:100%;height:100%;overflow:hidden;z-index:-2}
  #slideshow img{position:absolute;width:110%;height:110%;object-fit:cover;opacity:0;transition:opacity 2s ease,transform 6s ease}
  #slideshow img.active{opacity:1;transform:scale(1.15)}
  .light-leak{position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at 30% 30%, rgba(255,0,128,0.3), transparent 70%);mix-blend-mode:screen;animation:leak 8s infinite;z-index:-1}
  @keyframes leak{0%{opacity:0.2}50%{opacity:0.6}100%{opacity:0.2}}

  /* Copied from second code: message animated */
  .message{
    font-size:22px;
    max-width:850px;
    line-height:1.9;
    display:none;
    text-shadow:0 0 15px rgba(255,255,255,0.5);
    animation:fadeUp 1s ease forwards;
    margin:0 auto; /* Ensure centered */
  }

  @keyframes fadeUp{
    from{opacity:0;transform:translateY(30px) scale(.95)}
    to{opacity:1;transform:translateY(0) scale(1)}
  }

  /* Copied from second code: handwriting name */
  .name-draw{
    font-family:'Great Vibes',cursive;
    font-size:85px;
    fill:none;
    stroke:#ff9fff;
    stroke-width:2.2;
    stroke-linejoin:round;
    stroke-linecap:round;
    filter:drop-shadow(0 0 8px #ff00ff);
    animation:draw 5s ease forwards, glow 2s infinite alternate;
    display:none;
  }

  @keyframes draw{
    from{stroke-dasharray:900;stroke-dashoffset:900;}
    to{stroke-dasharray:900;stroke-dashoffset:0;}
  }

  @keyframes glow{
    from{filter:drop-shadow(0 0 3px #ff00ff);}
    to{filter:drop-shadow(0 0 18px #ff00ff);}
  }

  /* Copied from second code: final big text */
  .big{
    font-family:'Great Vibes',cursive;
    font-size:90px;
    color:#ffb6ff;
    text-shadow:0 0 20px #ff4dff,0 0 40px #ff00ff;
    display:none;
    animation:pop 1.5s ease forwards;
    margin:0 auto; /* Ensure centered */
  }

  @keyframes pop{
    0%{opacity:0;transform:scale(0.4)}
    70%{opacity:1;transform:scale(1.1)}
    100%{transform:scale(1)}
  }

  .heart{position:fixed;font-size:24px;animation:fly 5s linear forwards}
  @keyframes fly{from{transform:translateY(0) scale(1);opacity:1}to{transform:translateY(-120vh) scale(1.8);opacity:0}}

  #finalHeart{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(0);width:260px;height:260px;background:radial-gradient(circle at 30% 30%,#ff4da6,#ff1a75);clip-path:path("M130 230 L20 120 A55 55 0 0 1 130 40 A55 55 0 0 1 240 120 Z");transition:transform 1s ease;z-index:10}

  #startBtn{
    position:absolute;
    top:50%;left:50%;
    transform:translate(-50%,-50%);
    padding:15px 40px;
    font-size:1.4em;
    border:none;
    border-radius:40px;
    background:linear-gradient(90deg,#ff3b9b,#ff7eb3);
    color:white;
    cursor:pointer;
    box-shadow:0 0 25px #ff7eb3;
    font-weight:bold;
    letter-spacing:1px;
    transition:0.4s;
  }
  #startBtn:hover{transform:translate(-50%,-50%) scale(1.1);box-shadow:0 0 35px #ffb3d9;}
  canvas{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none}
</style>
<!-- Copied from second code: fonts -->
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>

<div id="slideshow">
  <img src="1.jpg" class="active">
  <img src="2.jpg">
  <img src="3.jpg">
  <img src="4.jpg">
  <div class="light-leak"></div>
</div>

<button id="startBtn">Start the Magic ðŸ’–</button>
<audio id="bgMusic" src="sorry.mp3" loop></audio>

<!-- Copied from second code: SVG for handwritten name -->
<svg id="nameSvg" width="400" height="150" class="name-draw" viewBox="0 0 400 150">
  <text x="50" y="100">Ishika</text>
</svg>

<!-- Copied from second code: message div -->
<div id="msg" class="message"></div>

<div id="finalHeart"></div>
<!-- Copied from second code: final big text -->
<div id="final" class="big">
  Tu Humesha Mere Sath Rahena..... <br>Ek kiss de de ðŸ’‹<br>â€” Tumhara katik
</div>
<canvas id="fireworks"></canvas>

<script>
// Copied from second code: messages array, but updated for Ishika
const lines=[
  "Ishikaâ€¦ tum ho to har pal khoobsurat lagta hai âœ¨",
  "Dil se nikalti ek hi dua â€” tum hamesha muskuraati raho â¤ï¸",
  "Kartik ki duniya ka sabse pyaara hissa ho tum ðŸ’–",
  "Is saal nahiâ€¦ har saal sirf tum hi tum ðŸ’«"
];

const nameSvg=document.getElementById("nameSvg");
const msg=document.getElementById("msg");
const finalHeart=document.getElementById("finalHeart");
const final=document.getElementById("final");
const startBtn=document.getElementById("startBtn");
const music=document.getElementById("bgMusic");

let mIndex=0;
let started=false;

// Modified to include name draw first, then messages like second code
function startEverything(){
  document.getElementById("startBtn").style.display="none";
  music.volume=0.9;
  music.play().catch(()=>{});

  nameSvg.style.display="block";

  setTimeout(()=>{
    nameSvg.style.display="none";
    showMessage();
  },5200);
}

function showMessage(){
  if(mIndex<lines.length){
    msg.innerHTML=lines[mIndex];
    msg.style.display="block";
    msg.style.animation="none";
    void msg.offsetWidth;
    msg.style.animation="fadeUp 1s ease forwards";
    for(let i=0;i<6;i++) setTimeout(spawnHeart, i*300);
    mIndex++;
    setTimeout(showMessage,7000);
  }else{
    setTimeout(showFinal,2500);
  }
}

function spawnHeart(){
  const h=document.createElement("div");
  h.className="heart";
  h.style.left=(Math.random()*80+10)+"%";
  h.style.bottom="0px";
  h.textContent=["â¤","ðŸ’–","ðŸ’•","ðŸ’˜"][Math.floor(Math.random()*4)];
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),5000);
}

// Slideshow
let slideIndex=0;
const slides=document.querySelectorAll("#slideshow img");
setInterval(()=>{
  slides[slideIndex].classList.remove("active");
  slideIndex=(slideIndex+1)%slides.length;
  slides[slideIndex].classList.add("active");
},6000);

// Final Heart + Fireworks, but final text now uses second code's big class
function showFinal(){
  finalHeart.style.transform="translate(-50%,-50%) scale(1)";
  setTimeout(()=>{
    final.style.display="block";
    for(let i=0;i<12;i++) setTimeout(()=>spawnFirework(innerWidth/2,innerHeight/2), i*300);
  },1200);
}

// Fireworks from first code (kept same, as not specified to change)
const canvas=document.getElementById("fireworks");
const ctx=canvas.getContext("2d");
canvas.width=innerWidth; canvas.height=innerHeight;
let fireworks=[];

function spawnFirework(x,y){
  const parts=[];
  for(let i=0;i<40;i++){
    const angle=Math.random()*2*Math.PI;
    const speed=Math.random()*5+2;
    parts.push({x,y,vx:Math.cos(angle)*speed,vy:Math.sin(angle)*speed,life:80,color:`hsl(${Math.random()*360},100%,60%)`});
  }
  fireworks.push(parts);
}

function drawFireworks(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  fireworks.forEach((fw)=>{
    fw.forEach(p=>{
      p.x+=p.vx; p.y+=p.vy; p.vy+=0.05; p.life--;
      ctx.beginPath(); ctx.arc(p.x,p.y,2,0,2*Math.PI);
      ctx.fillStyle=p.color; ctx.globalAlpha=Math.max(p.life/80,0);
      ctx.fill();
    });
  });
  fireworks=fireworks.filter(fw=>fw.some(p=>p.life>0));
  ctx.globalAlpha=1;
  requestAnimationFrame(drawFireworks);
}
drawFireworks();

// Start button click
startBtn.addEventListener("click",startEverything);
</script>
</body>
</html>
