<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Happy New Year â€” Ishika ðŸ’–</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box}
  body{overflow:hidden;font-family:'Segoe UI',sans-serif;background:#000;color:#fff;height:100vh}

  /* Slideshow full screen with fallback background */
  #slideshow{position:fixed;top:0;left:0;width:100%;height:100%;overflow:hidden;z-index:-3;background:linear-gradient(45deg,#ff0099,#ff00ff,#ff3399); /* Fallback if images don't load */}
  #slideshow img{position:absolute;width:110%;height:110%;object-fit:cover;opacity:0;transition:opacity 2s ease,transform 6s ease}
  #slideshow img.active{opacity:1;transform:scale(1.15)}
  .light-leak{position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at 30% 30%, rgba(255,0,128,0.3), transparent 70%);mix-blend-mode:screen;animation:leak 8s infinite;z-index:-2}
  @keyframes leak{0%{opacity:0.2}50%{opacity:0.6}100%{opacity:0.2}}

  /* Center container for content */
  .center{
    position:relative;
    height:100%;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    text-align:center;
    padding:15px;
    z-index:1; /* Above slideshow and fireworks */
  }

  /* Start button */
  .start-btn{
    padding:14px 30px;
    border:none;
    font-size:18px;
    border-radius:40px;
    background:linear-gradient(45deg,#ff0099,#ff00ff,#ff3399);
    color:white;
    cursor:pointer;
    box-shadow:0 0 25px #ff00ff;
    animation:pulseBtn 1.8s infinite;
  }

  @keyframes pulseBtn{
    0%{transform:scale(1)}
    50%{transform:scale(1.08)}
    100%{transform:scale(1)}
  }

  /* Handwritten name */
  .name-draw{
    font-family:'Great Vibes',cursive;
    font-size:85px;
    fill:none;
    stroke:#ff9fff;
    stroke-width:2.2;
    stroke-linejoin:round;
    stroke-linecap:round;
    filter:drop-shadow(0 0 8px #ff00ff);
    animation:draw 5s ease forwards, glow 2s infinite alternate;
    display:none;
  }

  @keyframes draw{
    from{stroke-dasharray:900;stroke-dashoffset:900;}
    to{stroke-dasharray:900;stroke-dashoffset:0;}
  }

  @keyframes glow{
    from{filter:drop-shadow(0 0 3px #ff00ff);}
    to{filter:drop-shadow(0 0 18px #ff00ff);}
  }

  /* Message animated */
  .message{
    font-size:22px;
    max-width:850px;
    line-height:1.9;
    display:none;
    text-shadow:0 0 15px rgba(255,255,255,0.5);
    animation:fadeUp 1s ease forwards;
  }

  @keyframes fadeUp{
    from{opacity:0;transform:translateY(30px) scale(.95)}
    to{opacity:1;transform:translateY(0) scale(1)}
  }

  /* Final big text */
  .big{
    font-family:'Great Vibes',cursive;
    font-size:90px;
    color:#ffb6ff;
    text-shadow:0 0 20px #ff4dff,0 0 40px #ff00ff;
    display:none;
    animation:pop 1.5s ease forwards;
  }

  @keyframes pop{
    0%{opacity:0;transform:scale(0.4)}
    70%{opacity:1;transform:scale(1.1)}
    100%{transform:scale(1)}
  }

  .heart{position:fixed;font-size:24px;animation:fly 5s linear forwards}
  @keyframes fly{from{transform:translateY(0) scale(1);opacity:1}to{transform:translateY(-120vh) scale(1.8);opacity:0}}

  #finalHeart{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(0);width:260px;height:260px;background:radial-gradient(circle at 30% 30%,#ff4da6,#ff1a75);clip-path:path("M130 230 L20 120 A55 55 0 0 1 130 40 A55 55 0 0 1 240 120 Z");transition:transform 1s ease;z-index:10}

  canvas{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:-1} /* Below content, above slideshow */
</style>
<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>

<!-- Slideshow -->
<div id="slideshow">
  <img src="1.jpg" class="active">
  <img src="2.jpg">
  <img src="3.jpg">
  <img src="4.jpg">
  <div class="light-leak"></div>
</div>

<!-- Center container -->
<div class="center">
  <button id="startBtn" class="start-btn">Start karo meri bbu ðŸ’–</button>

  <svg id="nameSvg" width="400" height="150" class="name-draw" viewBox="0 0 400 150">
    <text x="50" y="100">Ishika</text>
  </svg>

  <div id="msg" class="message"></div>

  <div id="final" class="big">
    Tu Humesha Mere Sath Rahena..... <br>Ek kiss de de ðŸ’‹<br>â€” Tumhara katik
  </div>
</div>

<div id="finalHeart"></div>
<canvas id="fireworks"></canvas>
<audio id="music" src="sorry.mp3" loop></audio>

<script>
// Messages
const lines=[
  "Ishikaâ€¦ tum ho to har pal khoobsurat lagta hai âœ¨",
  "Dil se nikalti ek hi dua â€” tum hamesha muskuraati raho â¤ï¸",
  "Kartik ki duniya ka sabse pyaara hissa ho tum ðŸ’–",
  "Is saal nahiâ€¦ har saal sirf tum hi tum ðŸ’«"
];

let mIndex=0;

function startEverything(){
  document.getElementById("startBtn").style.display="none";

  let m=document.getElementById("music");
  m.volume=0.9;
  m.play().catch(()=>{});

  const nameSvg=document.getElementById("nameSvg");
  nameSvg.style.display="block";

  setTimeout(()=>{
    nameSvg.style.display="none";

    let msg=document.getElementById("msg");
    let messageInterval=setInterval(()=>{
      if(mIndex<lines.length){
        msg.innerHTML=lines[mIndex];
        msg.style.display="block";
        msg.style.animation="none";
        void msg.offsetWidth;
        msg.style.animation="fadeUp 1s ease forwards";
        // Add hearts during messages
        for(let i=0;i<6;i++) setTimeout(spawnHeart, i*300);
        mIndex++;
      }else{
        msg.style.display="none";
        document.getElementById("final").style.display="block";
        clearInterval(messageInterval);
      }
    },5000); // Reduced to 5s

  },5200);

  startFireworks();
}

document.getElementById("startBtn").onclick=startEverything;

function spawnHeart(){
  const h=document.createElement("div");
  h.className="heart";
  h.style.left=(Math.random()*80+10)+"%";
  h.style.bottom="0px";
  h.textContent=["â¤","ðŸ’–","ðŸ’•","ðŸ’˜"][Math.floor(Math.random()*4)];
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),5000);
}

// Slideshow
let slideIndex=0;
const slides=document.querySelectorAll("#slideshow img");
setInterval(()=>{
  slides[slideIndex].classList.remove("active");
  slideIndex=(slideIndex+1)%slides.length;
  slides[slideIndex].classList.add("active");
},6000);

// Final Heart
function showFinal(){
  const finalHeart=document.getElementById("finalHeart");
  finalHeart.style.transform="translate(-50%,-50%) scale(1)";
  setTimeout(()=>{
    document.getElementById("final").style.display="block";
    for(let i=0;i<12;i++) setTimeout(()=>spawnFirework(innerWidth/2,innerHeight/2), i*300);
  },1200);
}

// Fireworks
function startFireworks(){
  const canvas=document.getElementById("fireworks");
  const ctx=canvas.getContext("2d");
  canvas.width=innerWidth;
  canvas.height=innerHeight;
  let particles=[];

  function Firework(x,y){
    for(let i=0;i<60;i++){
      particles.push({
        x:x,y:y,
        vx:(Math.random()-0.5)*6,
        vy:(Math.random()-0.5)*6,
        alpha:1,
        size:Math.random()*2+1
      });
    }
  }

  function animate(){
    ctx.clearRect(0,0,canvas.width,canvas.height); // Clear canvas each frame
    particles.forEach((p,i)=>{
      p.x+=p.vx;
      p.y+=p.vy;
      p.alpha-=0.01;
      ctx.beginPath();
      ctx.globalAlpha=p.alpha;
      ctx.arc(p.x,p.y,p.size,0,Math.PI*2);
      ctx.fillStyle="rgb(255,200,255)";
      ctx.fill();
      if(p.alpha<=0) particles.splice(i,1);
    });
    requestAnimationFrame(animate);
  }

  setInterval(()=>{
    Firework(Math.random()*canvas.width,Math.random()*canvas.height/1.3);
  },700);
  animate();
}

// Spawn firework for final
function spawnFirework(x,y){
  const canvas=document.getElementById("fireworks");
  const ctx=canvas.getContext("2d");
  for(let i=0;i<40;i++){
    const angle=Math.random()*2*Math.PI;
    const speed=Math.random()*5+2;
    // Particles are added in startFireworks
  }
}
</script>
</body>
</html>
